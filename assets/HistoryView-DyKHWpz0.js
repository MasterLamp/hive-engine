const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TransactionInfo-DHfbX7cM.js","assets/index-CCPLilNe.js","assets/index-Rzzs60cW.css"])))=>i.map(i=>d[i]);
import{r as n,x as L,c as v,U as M,A as O,V,o as i,d as b,f as a,t as k,a as B,h as r,w as g,i as N,b as I,g as R,X as U,F as E,a0 as F,z as D,a1 as P,B as S,a2 as W,I as w,a3 as j,a4 as z}from"./index-CCPLilNe.js";import{r as G,_ as X}from"./CustomTable-ruclgATk.js";import{r as Z}from"./InformationCircleIcon-DdWn0APd.js";const J={class:"page-header"},K={class:"mx-auto w-full max-w-7xl px-2 text-gray-200 sm:px-6 lg:px-8"},Q={class:"grid min-h-[160px] items-center text-center md:grid-cols-4 md:text-left"},Y={class:"col-span-full mt-3 md:col-span-3"},ee={class:"text-4xl uppercase"},te={key:1,class:"page-content"},ae=["onClick"],oe={key:0,class:"mt-5 text-center"},ie={__name:"HistoryView",setup(se){const A=j(()=>z(()=>import("./TransactionInfo-DHfbX7cM.js"),__vite__mapDeps([0,1,2]))),s=n(!0),u=F(),m=L(),d=n(0),p=n(30),_=n(!1),x=v(()=>m.username),f=v(()=>u.params.symbol);M({title:`${f.value} History`});const l=n([]),C=[{key:"date",label:"DATE"},{key:"operation",label:"OPERATION"},{key:"from",label:"FROM"},{key:"to",label:"TO"},{key:"amount",label:"AMOUNT"},{key:"action",label:""}],T=v(()=>l.value.map(e=>{let t=e.quantity?Number(e.quantity):0;return e.operation==="market_sell"||e.operation==="market_buy"?t=Number(e.quantityTokens):e.operation==="market_placeOrder"?t=D(Number(e.quantityLocked)/Number(e.price),8):e.operation==="market_cancel"?t=Number(e.quantityReturned):e.operation==="market_expire"&&(t=Number(e.quantityUnlocked)),{...e,date:P(new Date(e.timestamp*1e3),"Pp"),operation:$(e.operation),to:e.to?e.to:"N/A",from:e.from?h(e.from):"N/A",amount:t,symbol:e.symbol}}));O(()=>m.username,async()=>{m.isLoggedIn&&(_.value=!1,d.value=0,s.value=!0,await y(),s.value=!1)});const $=e=>e.split("_").map(t=>t[0].toUpperCase()+t.substr(1)).join(" ").replace(/([A-Z])/g," $1"),h=e=>{if(e.startsWith("contract_")){const t=e.replace("contract_","");return`${t.charAt(0).toUpperCase()+t.substring(1)} Contract`}return e},y=async(e=!1)=>{try{e&&(d.value+=p.value);const t={account:x.value,limit:p.value,offset:d.value};u.params.symbol&&(t.symbol=u.params.symbol);const o=await S.getAccountHistory(t);(o.length===0||o.length<p.value)&&(_.value=!0),e?l.value=[...l.value,...o]:l.value=o}catch{}},q=async e=>{const{open:t}=W({component:A,attrs:{transaction:e}});await t()};return V(async()=>{s.value=!0,await y(),s.value=!1}),(e,t)=>{const o=w("Loading"),H=w("router-link");return i(),b(E,null,[a("div",J,[a("div",K,[a("div",Q,[a("div",Y,[a("h1",ee,"History: "+k(f.value),1)])])])]),s.value?(i(),B(o,{key:0})):(i(),b("div",te,[r(H,{to:{name:"wallet",params:{account:x.value}},class:"btn-sm mb-3"},{default:g(()=>[r(N(G),{class:"h-5 w-5"})]),_:1},8,["to"]),r(X,{fields:C,items:T.value},{"cell(amount)":g(({item:c})=>[I(k(c.amount)+" "+k(f.value),1)]),"cell(action)":g(({item:c})=>[a("button",{class:"btn-sm",onClick:ne=>q(c)},[r(N(Z),{class:"h-5 w-5"})],8,ae)]),_:1},8,["items"]),_.value?R("",!0):(i(),b("div",oe,[a("button",{class:"btn-sm",onClick:t[0]||(t[0]=c=>y(!0))},"Load More")]))])),r(U)],64)}}};export{ie as default};
