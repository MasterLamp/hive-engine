import{U as V,r as b,u as B,x as T,c as k,A as U,V as I,G as L,P as r,H as A,o as n,d as p,W as E,a as N,h as c,w as l,k as M,J as $,f as d,t as _,Q as F,b as Y,i as v,j as q,g as D,X as H,F as P,I as h}from"./index-CCPLilNe.js";import{_ as Q}from"./CustomTable-ruclgATk.js";import{u as j}from"./market-CN3x3wqh.js";const z={key:1,class:"page-content"},G=["value"],J=["onClick"],R={key:0,class:"mt-5 text-right"},ee={__name:"OrdersView",setup(W){V({title:"Open Orders"});const s=b(!0),g=B(),a=j(),u=T(),o=b([]),i=k(()=>u.username),O=k(()=>a.openOrdersFormatted),w=[{key:"checkbox",label:""},{key:"timestamp",label:"DATE",sortable:!0},{key:"type",label:"TYPE",sortable:!0},{key:"quantity",label:"QUANTITY"},{key:"symbol",label:"SYMBOL"},{key:"price",label:"PRICE"},{key:"total",label:"TOTAL HIVE"},{key:"txId",label:"Action"}],y=async({id:m,ntrx:t})=>{s.value=!0,await g.validateTransaction(t>1?`${m}-0`:m)},f=async()=>{await a.fetchUserOrders(null,i.value),s.value=!1};return U(()=>u.username,async()=>{u.isLoggedIn&&(s.value=!0,await a.fetchUserOrders(null,i.value),s.value=!1)}),I(async()=>{s.value=!0;try{await a.fetchUserOrders(null,i.value)}catch{}s.value=!1}),L(()=>{r.on("broadcast-success",y),r.on("transaction-validated",f)}),A(()=>{r.off("broadcast-success",y),r.off("transaction-validated",f)}),(m,t)=>{const C=h("Loading"),S=h("router-link");return n(),p(P,null,[t[2]||(t[2]=E('<div class="page-header"><div class="mx-auto w-full max-w-7xl px-2 text-gray-200 sm:px-6 lg:px-8"><div class="grid min-h-[160px] items-center text-center md:grid-cols-4 md:text-left"><div class="col-span-full mt-3 md:col-span-3"><h1 class="text-4xl uppercase">Open Orders</h1></div></div></div></div>',1)),s.value?(n(),N(C,{key:0})):(n(),p("div",z,[c(Q,{fields:w,items:O.value},{"cell(checkbox)":l(({item:e})=>[M(d("input",{"onUpdate:modelValue":t[0]||(t[0]=x=>o.value=x),type:"checkbox",value:e},null,8,G),[[$,o.value]])]),"cell(type)":l(({item:e})=>[d("span",{class:F({"text-red-500":e.type==="SELL","text-green-500":e.type==="BUY"})},_(e.type),3)]),"cell(symbol)":l(({item:e})=>[c(S,{to:{name:"trade",params:{symbol:e.symbol}}},{default:l(()=>[Y(_(e.symbol),1)]),_:2},1032,["to"])]),"cell(txId)":l(({item:e})=>[d("button",{class:"btn-sm",onClick:x=>v(a).requestCancelOrders([e])},[c(v(q),{class:"h-5 w-5"})],8,J)]),_:1},8,["items"]),o.value.length>1?(n(),p("div",R,[d("button",{class:"btn-sm px-4",onClick:t[1]||(t[1]=e=>v(a).requestCancelOrders(o.value))},"Cancel All")])):D("",!0)])),c(H)],64)}}};export{ee as default};
