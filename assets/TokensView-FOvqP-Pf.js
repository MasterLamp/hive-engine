const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TokenInfo-OC2gi9hD.js","assets/index-CCPLilNe.js","assets/index-Rzzs60cW.css"])))=>i.map(i=>d[i]);
import{U as I,r as C,u as B,q as L,c as b,V as D,o as p,d as w,f as a,k as R,v as A,a as S,h as d,w as l,b as k,t as u,i as v,a6 as T,Q as U,g as W,X as H,F as j,n as q,a2 as z,I as N,a3 as G,a4 as O}from"./index-CCPLilNe.js";import{_ as Q}from"./CustomTable-ruclgATk.js";import{r as X}from"./InformationCircleIcon-DdWn0APd.js";import{r as J}from"./ArrowsRightLeftIcon-BnK6nU6-.js";const K={class:"page-header"},Y={class:"mx-auto w-full max-w-7xl px-2 text-gray-200 sm:px-6 lg:px-8"},Z={class:"grid min-h-[160px] items-center text-center md:grid-cols-4 md:text-left"},ee={class:"col-span-full mt-3 md:col-span-1"},te={key:1,class:"page-content"},se=["src"],ae={class:"flex"},oe=["onClick"],ue={__name:"TokensView",setup(le){const V=G(()=>O(()=>import("./TokenInfo-OC2gi9hD.js"),__vite__mapDeps([0,1,2])));I({title:"Tokens"});const _=C(!0),c=C(""),g=q("toFixedWithoutRounding"),y=B(),m=L(),P=[{key:"icon",label:""},{key:"symbol",label:"Token",sortable:!0},{key:"name",label:"Name"},{key:"marketCap",label:"Market Cap",sortable:!0},{key:"price",label:"Price",sortable:!0},{key:"change",label:"% Change",sortable:!0},{key:"volume",label:"24h Volume",sortable:!0},{key:"circulatingSupply",label:"Supply",sortable:!0},{key:"actions",label:""}],f=b(()=>m.metrics.reduce((s,t)=>{const{volume:n,volumeExpiration:r,lastPrice:e,priceChangePercent:o}=t;return s.set(t.symbol,{volume:Number(n),volumeExpiration:r,price:Number(e),change:o}),s},new Map)),E=b(()=>m.tokens.filter(s=>!y.settings.deprecated_tokens.includes(s.symbol)).reduce((s,t)=>{let{maxSupply:n,supply:r,circulatingSupply:e}=t,o=0,i=0,h=0,x=0;f.value.has(t.symbol)&&({volume:o,price:i,change:h,volumeExpiration:x}=f.value.get(t.symbol),x*1e3<Date.now()&&(o=0)),i=g(i*y.hivePrice,5),o=g(o*y.hivePrice,0),n=Number(n),r=Number(r),e=Number(e);const F=g(e*i,0);return s.push({...t,maxSupply:n,supply:r,circulatingSupply:e,marketCap:F,volume:o,price:i,change:h}),s},[]).sort((s,t)=>t.volume-s.volume)),M=b(()=>{const s=new RegExp(c.value,"i");return E.value.filter(t=>c.value!==""?s.test(t.symbol):!0)}),$=async s=>{const{open:t}=z({component:V,attrs:{token:s}});await t()};return D(async()=>{_.value=!0;try{await Promise.all([m.fetchTokens(),m.fetchMetrics()])}catch{}_.value=!1}),(s,t)=>{const n=N("Loading"),r=N("router-link");return p(),w(j,null,[a("div",K,[a("div",Y,[a("div",Z,[t[2]||(t[2]=a("div",{class:"col-span-full mt-3 md:col-span-3"},[a("h1",{class:"text-4xl uppercase"},"Tokens")],-1)),a("div",ee,[R(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),type:"text",placeholder:"Search tokens",onInput:t[1]||(t[1]=e=>c.value=e.target.value.toUpperCase())},null,544),[[A,c.value]])])])])]),_.value?(p(),S(n,{key:0})):(p(),w("div",te,[d(Q,{fields:P,items:M.value,"per-page":100},{"cell(icon)":l(({item:e})=>[a("img",{src:e.icon,class:"w-10"},null,8,se)]),"cell(marketCap)":l(({item:e})=>[k("$"+u(e.marketCap.toLocaleString()),1)]),"cell(price)":l(({item:e})=>[k("$"+u(v(T)(e.price,!0)),1)]),"cell(change)":l(({item:e})=>[a("span",{class:U({"text-green-500":parseFloat(e.change)>0,"text-red-500":parseFloat(e.change)<0})},u(e.change),3)]),"cell(volume)":l(({item:e})=>[k("$"+u(v(T)(e.volume,!0)),1)]),"cell(circulatingSupply)":l(({item:e})=>[k(u(e.circulatingSupply.toLocaleString()),1)]),"cell(actions)":l(({item:e})=>[a("div",ae,[a("button",{class:"btn-sm mr-1",onClick:o=>$(e)},[d(v(X),{class:"h-5 w-5"})],8,oe),e.symbol!=="SWAP.HIVE"?(p(),S(r,{key:0,to:{name:"trade",params:{symbol:e.symbol}},class:"btn-sm"},{default:l(()=>[d(v(J),{class:"h-5 w-5"})]),_:2},1032,["to"])):W("",!0)])]),_:1},8,["items"])])),d(H)],64)}}};export{ue as default};
