import{U as x,r as d,x as g,s as k,A as b,V as h,G as S,P as m,H as C,o as n,d as u,W as R,a as B,f as s,h as f,w as A,L as v,i as L,X as V,F as M,a5 as E,I as F}from"./index-CCPLilNe.js";import{_ as N}from"./CustomTable-ruclgATk.js";const T={key:1,class:"page-content"},U=["onClick"],W={class:"mt-5 text-right"},O={__name:"RewardsView",setup($){x({title:"SCOT Rewards"});const e=d(!0),c=g(),t=k(),l=d([]),w=[{key:"symbol",label:"SYMBOL"},{key:"stake",label:"STAKE"},{key:"reward",label:"REWARD"},{key:"actions",label:""}],o=async()=>{try{l.value=await t.fetchScotRewards()}catch{}},p=async()=>{const r=l.value.map(a=>a.symbol);await t.requestClaimScotRewards(r)},i=async()=>{e.value=!0,await E(30*1e3),await o(),e.value=!1};return b(()=>c.username,async()=>{c.isLoggedIn&&(e.value=!0,await o(),e.value=!1)}),h(async()=>{e.value=!0,await o(),e.value=!1}),S(()=>{m.on("scot-claim-successful",i)}),C(()=>{m.off("scot-claim-successful",i)}),(r,a)=>{const y=F("Loading");return n(),u(M,null,[a[1]||(a[1]=R('<div class="page-header"><div class="mx-auto w-full max-w-7xl px-2 text-gray-200 sm:px-6 lg:px-8"><div class="grid min-h-[160px] items-center text-center md:grid-cols-4 md:text-left"><div class="col-span-full mt-3 md:col-span-3"><h1 class="text-4xl uppercase">Rewards</h1></div></div></div></div>',1)),e.value?(n(),B(y,{key:0})):(n(),u("div",T,[a[0]||(a[0]=s("div",{class:"alert-warning"},"You can only claim a token once a day, including manual and auto.",-1)),f(N,{fields:w,items:l.value},{"cell(actions)":A(({item:_})=>[s("button",{class:"btn-sm",onClick:v(q=>L(t).requestClaimScotRewards(_.symbol),["prevent"])},"Claim",8,U)]),_:1},8,["items"]),s("div",W,[s("button",{class:"btn-sm",onClick:v(p,["prevent"])},"Claim All")])])),f(V)],64)}}};export{O as default};
